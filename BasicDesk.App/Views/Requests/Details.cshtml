@using BasicDesk.Common.Constants;
@model RequestDetailsViewModel
@{
    ViewData["Title"] = "Details";
}

<h2 class="text-center">Details for Request #@Model.Id</h2>

<div class="container">
    <div class="panel-group">
        <div class="panel panel-primary">
            <div class="panel-heading clearfix">
                <div class="pull-left"><strong>Subject:</strong> @Model.Subject</div>
                <div class="pull-right"><strong>Created On:</strong> @Model.CreatedOn</div>
            </div>
            <div class="panel-body"><strong>Description:</strong> <p>@Model.Description</p></div>
            <div class="panel-footer clearfix">
                <div class="pull-left"><strong>Status:</strong> @Model.Status</div>
                <div class="pull-right"><strong>Assigned To: </strong> @Model.AssignedToName</div>
            </div>
            <div class="panel-footer clearfix">
                <div class="pull-left"><strong>Category:</strong> @Model.Category</div>

                <div class="pull-right">
                    <strong>Email: </strong><a href="mailto://@Model.AssignedToEmail">@Model.AssignedToEmail</a>
                </div>
            </div>
            <div class="panel-footer clearfix">
                <div class="text-center"><strong> Author:</strong> @Model.Author</div>
            </div>

            @if (Model.Attachment != null)
            {
                <div class="panel-footer clearfix">
                    <div class="text-center">
                        <label asp-for="@Model.Attachment">Attachment: </label>
                        <a asp-controller="Requests" asp-action="Download"
                           asp-route-filename="@Model.Attachment.FileName" asp-route-filePath="@Model.Attachment.PathToFile" asp-route-requestId="@Model.Id">
                            @Model.Attachment.FileName
                        </a>
                    </div>
                </div>
            }
        </div>
        

    </div>
</div>
<div class="col-sm-offset-5">
    <a asp-area="" asp-controller="Requests" asp-action="Index" class="btn btn-info">Back to Requests</a>
    @if (User.IsInRole(WebConstants.AdminRole) || User.IsInRole(WebConstants.HelpdeskRole))
    {
        <a asp-area="Management" asp-page="/Requests/Manage" asp-route-id="@Model.Id" class="btn btn-warning">Manage</a>
    }
</div>